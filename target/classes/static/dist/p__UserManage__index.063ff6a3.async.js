"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[521],{45902:function(je,A,a){a.r(A),a.d(A,{default:function(){return ye}});var K=a(48305),C=a.n(K),J=a(90228),d=a.n(J),Q=a(26068),H=a.n(Q),X=a(87999),p=a.n(X),q=a(47839),_=a(99505),M=a(93378),ee=a(22421),re=a(7389),R=a(48049),k=a(73694),ae=a(34830),g=a(75271),B=a(86073),e=a(52676),ne=function(r){var s=r.modalVisible,t=r.onCancel;return(0,e.jsx)(B.Z,{destroyOnClose:!0,title:"\u65B0\u589E",width:420,open:s,onCancel:function(){return t()},footer:null,children:r.children})},te=ne,P=a(51560),x=a(42410),z=a(33934),ue=a(85557),Fe=function(r,s){for(var t=[],l=r;l<s;l++)t.push(l);return t},le=function(r){return(0,e.jsx)(P.L0,{stepsProps:{size:"small"},stepsFormRender:function(t,l){return(0,e.jsx)(B.Z,{width:640,bodyStyle:{padding:"32px 40px 48px"},destroyOnClose:!0,title:"\u4FEE\u6539",open:r.updateModalVisible,footer:l,onCancel:function(){return r.onCancel()},children:t})},onFinish:r.onSubmit,children:(0,e.jsxs)(P.L0.StepForm,{initialValues:{userName:r.values.userName,name:r.values.name,role:String(r.values.role),isLocked:r.values.isLocked,phone:r.values.phone,email:r.values.email,birthday:r.values.birthday},title:"\u4FEE\u6539\u7528\u6237\u4FE1\u606F",children:[(0,e.jsx)(x.Z,{width:"md",name:"userName",label:"\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D\uFF01"}]}),(0,e.jsx)(x.Z,{width:"md",name:"name",label:"\u59D3\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u59D3\u540D\uFF01"}]}),(0,e.jsx)(z.Z,{name:"role",label:"\u89D2\u8272",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u89D2\u8272!"}],options:[{label:"\u7BA1\u7406\u5458",value:"0"},{label:"\u666E\u901A\u7528\u6237",value:"1"}]}),(0,e.jsx)(z.Z,{name:"isLocked",label:"\u662F\u5426\u7981\u7528",rules:[{required:!0,message:"\u8BF7\u9009\u62E9!"}],options:[{label:"\u53EF\u7528",value:!1},{label:"\u7981\u7528",value:!0}]}),(0,e.jsx)(x.Z,{width:"md",name:"phone",label:"\u624B\u673A\u53F7",rules:[{pattern:/^1(3\d|4[5-9]|5[0-35-9]|6[2567]|7[0-8]|8\d|9[0-35-9])\d{8}$/,message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u624B\u673A\u53F7\u683C\u5F0F"}]}),(0,e.jsx)(x.Z,{width:"md",name:"email",label:"\u90AE\u7BB1",rules:[{pattern:/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/,message:"\u90AE\u7BB1\u683C\u5F0F\u4E0D\u6B63\u786E"}]}),(0,e.jsx)(ue.Z,{name:"birthday",label:"\u751F\u65E5",fieldProps:{format:"YYYY-MM-DD",showTime:!1}})]})})},se=le,ie=a(45039),L=q.Z.UserController,de=L.addUser,oe=L.queryUserList,ce=L.deleteUser,ve=L.modifyUser,me=function(){var h=p()(d()().mark(function r(s){var t,l;return d()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return t=R.ZP.loading("\u6B63\u5728\u6DFB\u52A0"),u.prev=1,u.next=4,de(H()({},s));case 4:if(l=u.sent,t(),l.code!==2e4){u.next=10;break}return u.abrupt("return",!0);case 10:return u.abrupt("return",!1);case 11:u.next=17;break;case 13:return u.prev=13,u.t0=u.catch(1),t(),u.abrupt("return",!1);case 17:case"end":return u.stop()}},r,null,[[1,13]])}));return function(s){return h.apply(this,arguments)}}(),fe=function(){var h=p()(d()().mark(function r(s,t){var l,y;return d()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return l=R.ZP.loading("\u6B63\u5728\u66F4\u65B0"),o.prev=1,o.next=4,ve({id:s||""},{userName:t.userName||"",name:t.name||"",role:t.role||"",isLocked:t.isLocked||!1,phone:t.phone||"",email:t.email||"",birthday:t.birthday?(0,ie.WU)(new Date(t.birthday),"yyyy-MM-dd"):""});case 4:if(y=o.sent,l(),y.code!==2e4){o.next=10;break}return o.abrupt("return",!0);case 10:return o.abrupt("return",!1);case 11:o.next=17;break;case 13:return o.prev=13,o.t0=o.catch(1),l(),o.abrupt("return",!1);case 17:case"end":return o.stop()}},r,null,[[1,13]])}));return function(s,t){return h.apply(this,arguments)}}(),he=function(){var h=p()(d()().mark(function r(s){var t,l,y,u=arguments;return d()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(t=u.length>1&&u[1]!==void 0?u[1]:3,l=R.ZP.loading("\u6B63\u5728\u5220\u9664"),s){m.next=4;break}return m.abrupt("return",!0);case 4:return m.prev=4,m.next=7,ce({ids:s.map(function(j){return j.id}).filter(function(j){return j!=null}).join(",")});case 7:return y=m.sent,l(),m.abrupt("return",!0);case 12:return m.prev=12,m.t0=m.catch(4),l(),m.abrupt("return",!1);case 16:case"end":return m.stop()}},r,null,[[4,12]])}));return function(s){return h.apply(this,arguments)}}(),pe=function(){var r=(0,g.useState)(!1),s=C()(r,2),t=s[0],l=s[1],y=(0,g.useState)(!1),u=C()(y,2),o=u[0],m=u[1],j=(0,g.useState)(!1),D=C()(j,2),ge=D[0],T=D[1],Se=(0,g.useState)({}),I=C()(Se,2),F=I[0],$=I[1],Z=(0,g.useRef)(),be=(0,g.useState)(),N=C()(be,2),E=N[0],Y=N[1],Ce=(0,g.useState)([]),O=C()(Ce,2),w=O[0],W=O[1],V=[{title:"id",dataIndex:"id",valueType:"text",hideInForm:!0},{title:"\u7528\u6237\u540D",dataIndex:"userName",tip:"\u7528\u6237\u540D\u662F\u552F\u4E00\u7684 key",formItemProps:{rules:[{required:!0,message:"\u7528\u6237\u540D\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u59D3\u540D",dataIndex:"name",valueType:"text"},{title:"\u89D2\u8272",dataIndex:"role",valueEnum:{0:{text:"\u7BA1\u7406\u5458"},1:{text:"\u666E\u901A\u7528\u6237"}}},{title:"\u662F\u5426\u7981\u7528",dataIndex:"isLocked",hideInForm:!0,valueEnum:{false:{text:"\u53EF\u7528",status:"Success"},true:{text:"\u7981\u7528",status:"Error"}}},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(i,n){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("a",{onClick:function(){T(!0),$(n)},children:"\u4FEE\u6539"}),(0,e.jsx)("a",{onClick:function(){return Y(n)},style:{marginLeft:8},children:"\u67E5\u770B"})]})}}];return(0,e.jsxs)(_._z,{header:{title:"\u7528\u6237\u7BA1\u7406"},children:[(0,e.jsx)(M.Z,{pagination:{pageSize:10,showQuickJumper:!0},headerTitle:"\u67E5\u8BE2\u8868\u683C",actionRef:Z,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[(0,e.jsx)(k.ZP,{type:"primary",onClick:function(){return l(!0)},children:"\u65B0\u589E"},"1")]},request:function(){var c=p()(d()().mark(function i(n,f,S){var v,b,G;return d()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,oe({pageNum:n.current,pageSize:n.pageSize,id:n.id,userName:n.userName,name:n.name,role:n.role,isLocked:n.isLocked});case 2:return v=U.sent,b=v.data,G=v.success,U.abrupt("return",{data:(b==null?void 0:b.list)||[],total:(b==null?void 0:b.total)||5,success:G});case 6:case"end":return U.stop()}},i)}));return function(i,n,f){return c.apply(this,arguments)}}(),columns:V,rowSelection:{onChange:function(i,n){return W(n)}}}),(w==null?void 0:w.length)>0&&(0,e.jsx)(ee.S,{extra:(0,e.jsxs)("div",{children:["\u5DF2\u9009\u62E9"," ",(0,e.jsx)("a",{style:{fontWeight:600},children:w.length})," ","\u9879\xA0\xA0"]}),children:(0,e.jsx)(k.ZP,{type:"primary",onClick:p()(d()().mark(function c(){var i,n;return d()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,he(w);case 2:W([]),(i=Z.current)===null||i===void 0||(n=i.reloadAndRest)===null||n===void 0||n.call(i);case 4:case"end":return S.stop()}},c)})),children:"\u6279\u91CF\u5220\u9664"})}),(0,e.jsx)(te,{onCancel:function(){return l(!1)},modalVisible:t,children:(0,e.jsx)(M.Z,{onSubmit:function(){var c=p()(d()().mark(function i(n){var f;return d()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,me(n);case 2:f=v.sent,f&&(l(!1),Z.current&&Z.current.reload());case 4:case"end":return v.stop()}},i)}));return function(i){return c.apply(this,arguments)}}(),rowKey:"id",type:"form",columns:V})}),F&&Object.keys(F).length?(0,e.jsx)(se,{onSubmit:function(){var c=p()(d()().mark(function i(n){var f;return d()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,fe((F==null?void 0:F.id)||"",n);case 2:f=v.sent,f&&(T(!1),$({}),Z.current&&Z.current.reload());case 4:case"end":return v.stop()}},i)}));return function(i){return c.apply(this,arguments)}}(),onCancel:function(){T(!1),$({})},updateModalVisible:ge,values:F}):null,(0,e.jsx)(ae.Z,{width:600,open:!!E,onClose:function(){return Y(void 0)},closable:!0,children:(E==null?void 0:E.id)&&(0,e.jsx)(re.vY,{column:2,title:"\u7528\u6237\u8BE6\u60C5",request:p()(d()().mark(function c(){return d()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",{data:E});case 1:case"end":return n.stop()}},c)})),params:{id:E.id},columns:V})})]})},ye=pe}}]);
